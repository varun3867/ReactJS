														
														Date : 24-01-2022
														 AJAX - Part - 1
													--------------------------		


Execution of network calls parallely without effecting the other calls is called asynchronous calls.
Asynchronous calls also called as AJAX Calls.
In react we do AJAX calls using AXIOS Library

create react app:
-----------------
npx create-react-app example_1
cd example_1
install axios library : yarn add axios
				axios library is used to make the asynchronous calls


To make axios calls we use useEffect hook.
It takes two parameters.
	1. Arrow Function
	2. Dependencies


axios has get() function that takes url as parameter. we use then() on it that takes
two arrow functions as parameters in which one arrow function takes positive response
as input and another arrow function takes error response as input


useState hook is used to maintain the state/information of componenet.
It takes value as parameter and returns array of type const.


import React,{useState,useEffect} from 'react';
App.js
--------
function App(){

	const [arr,setArr] = useState([]);

	useEffect(()=>{
		
		axios.get("").then((posRes)=>{
				const {data} = posRes;
				const {records} = data;
				setArr(records)
				console.log(posRes);
				
				},(errRes)=>{
				
				console.log(errRes);
				
				})
		
		},[])
		
		
	return(
		<React.Fragment>
		//	<p>{JSON.stringify(arr)}</p>
			<table border="1"
				   cellPadding="10"
				   cellSpacing="10"
				   allign="Center">
			
				<tr>
					<th>NAME</th>
					<th>CITY</th>
					<th>COUNTRY</th>
				</tr>
				
				{arr.map((element,index)=>{
					
						<tr key={index}>
							<td>{element.Name}</td>
							<td>{element.City}</td>
							<td>{element.Country}</td>
							
						</tr>
					
					})}
					
			</table>
		</React.Fragment>
	)
		
		
}

export default App;


facebook company who has developed ReactJS has provided fetch function to make
ashynchronous calls.
Problem with fetch function:
	fetch() function takes url as parameter and we use then on it that takes
	arrow function as argument. arrow function takes response as parameter which
	need to convert into json. so we prefer axios over fetch() function
	
	converting response to json format forcefully is the problem with fetch() function
	

create react app:
-------------------
npx create-react-app example_2

App.js
import React,{useEffect,useState} from "react";

function App(){

	const [arr,setArr] = useState([]);

	useEffect(()=>{

		fetch("url").then((res)=>res.json()).then((posRes)=>{
					console.log(posRes)
					setArr(posRes)
				},(errRes)=>{
					console.log(errRes)
					})

		},[])

	return(
		<React.Fragment>
			<p>{JSON.stringify(arr)}</p>
			
		</React.Fragment>
	);

}
export default App;